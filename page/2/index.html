<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="kingber">
<meta property="og:url" content="http://kangbiao.org/page/2/index.html">
<meta property="og:site_name" content="kingber">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kingber">



  <link rel="alternate" href="/atom.xml" title="kingber" type="application/atom+xml" />




  <link rel="canonical" href="http://kangbiao.org/page/2/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>kingber</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kingber</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">关注简书【@进击的诺基亚】，欢迎前来交流^_^</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/12/28/hadoop-learn-note-2015-12-28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/28/hadoop-learn-note-2015-12-28/" itemprop="url">
                  hadoop学习笔记之MapReduce初探
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-28 20:25:56" itemprop="dateCreated datePublished" datetime="2015-12-28T20:25:56+08:00">2015-12-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-07-11 20:11:10" itemprop="dateModified" datetime="2016-07-11T20:11:10+08:00">2016-07-11</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大数据/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><blockquote>
<p>在python和swift中，map，reduce都是一种高阶函数（还有filter），那么什么是高阶函数呢？这里引用一下廖雪峰大神的总结，高阶函数就是指函数参数可以接收其他函数，还有一种函数叫作偏函数，就是指函数的返回值是一个函数。<br>高阶函数和偏函数的概念可以阅读函数式编程一书得到参考<br>java8的lambda表达式就是一种高阶函数的实现。</p>
</blockquote>
<p>好吧，回归正题，那么什么是map，什么又是reduce呢？<br><strong>map</strong>：map就是指把输入的数据集中的每一个元素进行处理后输出，这种输入输出通常是键值对形式的。<br><strong>reduce</strong>：reduce的英文释义是规约，也就是说reduce函数是将一定的数据集进行循环的处理得到最终的结果。比如找出每个数据集中的最大值。</p>
<h2 id="Mapper和Reducer"><a href="#Mapper和Reducer" class="headerlink" title="Mapper和Reducer"></a>Mapper和Reducer</h2><p><strong>Mapper</strong>是泛型类型，分别是map函数的输入键，输入值，输出建和输出值，hadoop在java自带的基本类型之上还封装了一套适用于网络序列化传输的基本类型，这些类型位于or.apache.hadoop.io包中，例如Text类型相当于java的String类型。<br><strong>Reducer</strong>也是泛型类型，类型参数和Mapper一样，Reducer提供了强大的数据比较和抽取能力。<br><strong>Job</strong>是用来指定作业执行规范的，主要包括如下几步：</p>
<ol>
<li>设置作业完整的类名</li>
<li>设置作业名称</li>
<li>设置输入和输入源（可以来自网络，可以来自文件系统）</li>
<li>设置map（即对数据进行处理的Mapper实现类）和设置reduce（Reducer的实现类）。</li>
</ol>
<h2 id="新旧api差别"><a href="#新旧api差别" class="headerlink" title="新旧api差别"></a>新旧api差别</h2><blockquote>
<p>参考官网</p>
</blockquote>
<h2 id="MapReduce的横向（水平）扩展"><a href="#MapReduce的横向（水平）扩展" class="headerlink" title="MapReduce的横向（水平）扩展"></a>MapReduce的横向（水平）扩展</h2><blockquote>
<p>为了实现横向扩展，需要将数据存储在类似于HDFS的分布式文件系统中。</p>
</blockquote>
<p>在MapReduce的作业中，有两类节点控制着作业的执行，一类是jobtracker（作业节点）和一系列的tasktracker（任务节点），一个作业是由多个任务（map任务和reduce任务）组成的。</p>
<p>Hadoop将数据分为大小相等的数据块，每个数据块就是一个分片，并且为每个分片指定一个map任务，由该任务来运行用户自定义的map函数从而处理分片中的每条记录。</p>
<p>分片的大小决定了程序的效率和资源的利用率，如果分片太小，那么管理分片的总时间和构建map任务的时间将会决定整个处理时间，如果分片太大，又没有充分利用map函数提供的处理能力，所以合适的分片大小至关重要。一个合理的分片大小大概是HDFS的一个块的大小。默认是64MB。如果超过了该大小，那么输入源的数据就会存储在两个机架上面，这样就会产生网络传输，降低了效率。</p>
<p>对于map任务，一般运行在输入数据存储的机器上，这样不需要使用网络带宽资源，提高了IO效率。如果该map任务在处理其他的任务，则需要协调其他机架上面的map任务来进行处理，这样还是会产生网络传输。但是这么做，会大大的减少这种情况的发生。</p>
<p>map任务的输出一般都是存储在任务执行的机器上面，因为map输出的数据大多是一个中间数据，只需要临时存储，在传给reduce任务处理之后，就可以删除该中间结果。如果中间数据传输给reduce任务失败，则会在另一个节点上重新运行map任务重新传输从而避免再次失败。</p>
<p>reduce任务可以接收来自多个map任务的输出，这之间复杂的数据传输流称为shuffle。shuffle就是怎样把map task的输出结果有效地传送到reduce端，也可以理解为 Shuffle描述着数据从map task输出到reduce task输入的这段过程。<br>下图是官方的shuffle解释图<br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/shuffle-official.png" alt="shuffle官网解释图"><br><a href="http://langyu.iteye.com/blog/992916" target="_blank" rel="external">shuffle参考资料</a></p>
<h2 id="combiner"><a href="#combiner" class="headerlink" title="combiner"></a>combiner</h2><p>为了减少map和reduce之间的数据传输量，充分利用集群之间的带宽，可以对map的输出执行一次或者多次的combiner函数，相当于对于单个map进行的规约操作（reduce是对于多个map任务的规约）.但是combiner的适用场景有限，例如平均数的计算可能就不适用-((x+y+z+a)/4+(b+c)/2)/2!=(a+b+c+x+y+z)/6，所以该函数的适用范围为对分片数据规约不会影响整个结果的场景。</p>
<h2 id="Streaming-API"><a href="#Streaming-API" class="headerlink" title="Streaming API"></a>Streaming API</h2><p>Streaming API 使得我们可以用其他编程语言实现自己的map和reduce函数，例如用c++实现，提高程序的处理效率。<br>该API使用标准输入输出流作为hadoop和不同语言编写的map和reduce任务之间的接口。<br>当使用Streaming时需要在hadoop的运行命令里面指定streaming.jar文件的位置从而让hadoop支持其他语言。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/12/20/servlet-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/20/servlet-principle/" itemprop="url">
                  JAVA Servlet工作原理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-20 22:55:22" itemprop="dateCreated datePublished" datetime="2015-12-20T22:55:22+08:00">2015-12-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-04-03 00:04:06" itemprop="dateModified" datetime="2016-04-03T00:04:06+08:00">2016-04-03</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="servlet容器加载顺序"><a href="#servlet容器加载顺序" class="headerlink" title="servlet容器加载顺序"></a>servlet容器加载顺序</h1><ol>
<li>当 Servlet 容器（比如 Apache Tomcat ）启动后，会部署和加载所有 web 应用。当web 应用被加载，Servlet 容器会创建一次 <strong><em>ServletContext</em></strong>，然后将其保存在服务器的内存中。</li>
<li>web 应用的  web.xml 被解析，找到其中所有  servlet 、 filter 和  Listener 或  @WebServlet 、 @WebFilter 和  @WebListener 注解的内容，创建一次并保存到服务器的内存中。</li>
<li>对于所有过滤器会立即调用init() 。</li>
<li>当Servlet配置的 <strong><em>load-on-startup</em></strong> 或者 @WebServlet(loadOnStartup) 设置了一个大于 0 的值，则同样会在启动的时候立即调用 init() 方法。“<strong><em>load-on-startup</em></strong>”中的值表示那些 Servlet 会以相同顺序初始化。如果配置的值相同，会遵循  web.xml 中指定的顺序或 @WebServlet 类加载的顺序。另外，如果不设置 “<strong><em>load-on-startup</em></strong>” 值， init() 方法只在第一次 HTTP 请求命中问题中的 Servlet 时才被调用。</li>
<li>当 Servlet 容器停止，将卸载所有 web 应用，调用所有初始化的 Servlet 和过滤器的  destroy() 方法，最后回收 <strong><em>ServletContext</em></strong>和所有  Servlet 、Filter 与  Listener 实例。</li>
</ol>
<h1 id="HttpServletRequest-与-HttpServletResponse"><a href="#HttpServletRequest-与-HttpServletResponse" class="headerlink" title="HttpServletRequest 与 HttpServletResponse"></a>HttpServletRequest 与 HttpServletResponse</h1><p>Servlet 容器附加在一个 web 服务上，这个 web 服务会在某个端口号上监听 HTTP 请求，在开发环境中这个端口通常为 8080，生产环境中通常为 80。当客户端（web 浏览器）发送了一个 HTTP 请求，Servlet 容器会创建新的 <strong><em>HttpServletRequest</em></strong> 和  <strong><em>HttpServletResponse</em></strong> 对象，传递给已创建好并且请求的 URL 匹配  url-pattern 的  Filter 和  Servlet 实例中的方法，所有工作都在同一个线程中处理。</p>
<p>request 对象可以访问所有该 HTTP 请求中的信息，例如 request header 和 request body。response 对象为你提供需要的控制和发送 HTTP 响应方法，例如设置 header 和 body（通常会带有 JSP 文件中的 HTML 内容）。提交并完成HTTP 响应后，将回收 request 和 response 对象。</p>
<h1 id="HttpSession"><a href="#HttpSession" class="headerlink" title="HttpSession"></a>HttpSession</h1><p>当用户第一次访问该 web 应用时，会通过 request.getSession() 第一次获得  <strong><em>HttpSession</em></strong> 。之后 Servlet 容器将会创建 <strong><em>HttpSession</em></strong> ，生成一个唯一的 ID（可以通过  session.getId() 获取）并储存在服务器内存中。然后 Servlet 容器在该次 HTTP 响应的  Set-Cookie 头部设置一个 Cookie ，以 JSESSIONID 作为 Cookie 名字，那个唯一的 session ID 作为  Cookie 的值。</p>
<p>按照 HTTP cookie 规则 （正常 web 浏览器和 web 服务端必须遵循的标准），当 cookie 有效时，要求客户端（浏览器）在后续请求的  Cookie 头中返回这个 cookie。使用浏览器内置的 HTTP 流量监控器可以查看它们（在 Chrome、Firefox23+、IE9+ 中按 F12，然后查看 Net/Network 标签）。Servlet 容器将会确定每个进入的 HTTP 请求的  Cookie 头中是否存在名为 JSESSIONID 的 cookie，然后用它的值（session ID）从服务端内存中找到关联的  HttpSession 。</p>
<p>在 web.xml 中设置  session-timeout ，默认值为 30 分钟。超时到达之前  HttpSession 会一直存活。所以当客户端不再访问该 web 应用超过 30 分钟后，Servlet 容器就会回收这个 session。后续每个请求，即使指定 cookie 名称也不能再访问到相同的 session。Servlet 容器会创建一个新的  Cookie 。</p>
<p>另一方面，客户端上的 session cookie 有一个默认存活时间，该事件和该浏览器实例运行时间一样长。所以，当客户端关闭该浏览器实例（所有标签和窗口）后，这个 session 就会被客户端回收。新浏览器实例不再发送与该 session 关联的 cookie。一个新的 request.getSession() 将会返回新的  HttpSession 并设置一个拥有新  session ID 的 cookie。</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol>
<li><strong><em>ServletContext</em></strong> 与 web 应用存活时间一样长。它被所有 session 中的所有请求共享。</li>
<li>只要客户端一直与相同浏览器实例的web应用交互并且没有超时，HttpSession就会存在。</li>
<li><strong><em>HttpServletRequest</em></strong> 和 <strong><em>HttpServletResponse</em></strong> 的存活时间为客户端发送完成到完整的响应（web 页面）到达的这段时间。不会被其他地方共享。</li>
<li>所有 Servlet 、 Filter  和  Listener  对象在 web 应用运行时都是活跃的。它们被所有 session 中的请求共享。</li>
<li>设置在  <strong><em>HttpServletRequest</em></strong> 、 <strong><em>HttpServletResponse</em></strong>  和  <strong><em>HttpSession</em></strong>  中的所有属性在Servlet存活时都会一直保持存活。</li>
</ol>
<h1 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h1><p>Servlet 和 Filter 被所有请求共享。那是 Java 的一个优点，使得多个不同线程（读取 HTTP 请求）可以使用同一个实例。否则为每个请求重新创建线程的开销实在过于昂贵。</p>
<p>但永远不要将任何 request 或 session 域中的数据赋值给 servlet 或 filter 的实例变量。它将会被所有其他 session 中的所有请求共享。那是非线程安全的！下面的示例对这种情况进行了展示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Object thisIsNOTThreadSafe;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        Object thisIsThreadSafe;</div><div class="line"></div><div class="line">        thisIsNOTThreadSafe = request.setParameter(<span class="string">"foo"</span>); <span class="comment">// 不安全，为所有请求所共享</span></div><div class="line">        thisIsThreadSafe = request.getParameter(<span class="string">"foo"</span>); <span class="comment">// 线程安全</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/12/15/MQ-learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/15/MQ-learning/" itemprop="url">
                  理解JAVA MQ消息中间件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-15 22:00:00" itemprop="dateCreated datePublished" datetime="2015-12-15T22:00:00+08:00">2015-12-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-04-03 00:03:42" itemprop="dateModified" datetime="2016-04-03T00:03:42+08:00">2016-04-03</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="MQ的几种消息传递方式"><a href="#MQ的几种消息传递方式" class="headerlink" title="MQ的几种消息传递方式"></a>MQ的几种消息传递方式</h2><h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a>发布订阅模式</h3><p>发布订阅模式有点类似于我们日常生活中订阅报纸。每年到年尾的时候，邮局就会发一本报纸集合让我们来选择订阅哪一个。在这个表里头列了所有出版发行的报纸，那么对于我们每一个订阅者来说，我们可以选择一份或者多份报纸。比如北京日报、潇湘晨报等。那么这些个我们订阅的报纸，就相当于发布订阅模式里的topic。有很多个人订阅报纸，也有人可能和我订阅了相同的报纸。那么，在这里，相当于我们在同一个topic里注册了。对于一份报纸发行方来说，它和所有的订阅者就构成了一个1对多的关系。这种关系如下图所示：<br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/mq-topic.jpg" alt="发布订阅模式"></p>
<h3 id="点对点模式"><a href="#点对点模式" class="headerlink" title="点对点模式"></a>点对点模式</h3><p>点对点模式就相当于打电话，由两端的双方独享这一通信链路<br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/mq-queue.jpg" alt="点对点模式"></p>
<h3 id="扩展的对点模式"><a href="#扩展的对点模式" class="headerlink" title="扩展的对点模式"></a>扩展的对点模式</h3><p> 和前面两种方式比较起来，request-response的通信方式很常见，但是不是默认提供的一种模式。在前面的两种模式中都是一方负责发送消息而另外一方负责处理。而我们实际中的很多应用相当于一种一应一答的过程，需要双方都能给对方发送消息。于是请求-应答的这种通信方式也很重要。它也应用的很普遍。<br> 请求-应答方式并不是JMS规范系统默认提供的一种通信方式，而是通过在现有通信方式的基础上稍微运用一点技巧实现的。下图是典型的请求-应答方式的交互过程：<br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/mq-two.jpg" alt="request-response"></p>
<h2 id="我在项目中的理解"><a href="#我在项目中的理解" class="headerlink" title="我在项目中的理解"></a>我在项目中的理解</h2><p>MQ其实就是一个消息中转站。<br>在企业级的应用里，会有一个服务器集群来作为这个中转站，这个集群中有主从，有备份，有路由，有网关。此时MQ就是就是一种中间件，在个人的实验中体会不到这种感觉。<br>企业级的MQ不仅仅实现了简单的消息中转站的功能，还实现了消息生产者和消息消费者的认证功能（即他们能消费和生产哪些具体的topic）。<br>附一张企业MQ的架构图<br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/mq-with-boker.png" alt="mq集群"></p>
<h2 id="MQ的缺点"><a href="#MQ的缺点" class="headerlink" title="MQ的缺点"></a>MQ的缺点</h2><ol>
<li>mq的主要问题在于重复生产和重复消费(延迟也是一个很大的缺点，但是这可以换来性能上的提升，监听获取信息肯定比轮询获取信息的效率高)。</li>
<li>比如几个业务系统需要消费一个点对点模式的mq消息，其中一个业务系统消费成功了但是并没有向mq服务器成功发送消费成功的确认ack，导致消息在mq服务器中依然存在，从而导致其他业务系统的重复消费。</li>
<li>再比如生产者如果没有接收到mq服务器的确认消息，就会重复生产，如果在服务器没有相应的去重措施，就会带来很大的隐患。</li>
<li>所以在使用MQ的时候，最重要的问题不是在于怎么去用它，而是怎么在业务系统中解决重复生产和重复消费的问题。具体的得根据系统允许的容错率和业务来进行相应的处理。</li>
<li>我主要说一下在服务器端对MQ进行去重的方法，如果是同一topic的信息，可以通过对消息内容进行摘要运算从而达到简单的去重效果。</li>
</ol>
<h2 id="实现可靠MQ和去重参考方法"><a href="#实现可靠MQ和去重参考方法" class="headerlink" title="实现可靠MQ和去重参考方法"></a>实现可靠MQ和去重参考方法</h2><ol>
<li><p>消息的可靠性设计，目前有2种模式：模式1是采用Notify的方式，先发送半消息，业务操作成功后最后提交完整消息，同时提供业务操作的检查接口，这种模式实现消息的最终一致性；模式2将业务数据和消息数据先都存在业务数据库里面，通过数据库的事务保证一致性，随后将消息转发给MQ。模式1的缺点是业务侵入性高，方案比较复杂，需要重新实现；模式2的缺点是消息数据可能会散落在各个地方，包括业务系统，而且可以集成现有MQ。</p>
</li>
<li><p>消息去重设计，也有2种模式：模式1是消费者根据自己的业务实现去重，模式2是在消费者端增加一个数据库表专门记录已经消费过的消息，不需要消费者根据业务去做去重。</p>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/12/03/jvm-memory-manage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/03/jvm-memory-manage/" itemprop="url">
                  JVM内存自动管理机制
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-03 22:20:56" itemprop="dateCreated datePublished" datetime="2015-12-03T22:20:56+08:00">2015-12-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-02-19 20:32:48" itemprop="dateModified" datetime="2016-02-19T20:32:48+08:00">2016-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本文主要总结java虚拟机的内存管理机制,不同的数据类型存在在怎样的一块内存区域中,不同的内存区域有哪些不同点,怎样回收过了生命周期的内存,采取何种策略去回收这些对象或者常量,不同的回收算法的优缺点.什么情况下会产生内存溢出异常以及该采取怎样的措施避免内存溢出,以及一些常用的虚拟机性能监控工具和故障排除工具<br>-&lt;&lt;深入理解java虚拟机&gt;&gt;读书笔记</p>
</blockquote>
<h2 id="jvm内存区域"><a href="#jvm内存区域" class="headerlink" title="jvm内存区域"></a>jvm内存区域</h2><p><strong>虚拟机管理的运行时数据区域如下图所示</strong><br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/20131106214200_112.jpg" alt="虚拟机运行时数据区域图例"></p>
<h3 id="方法区"><a href="#方法区" class="headerlink" title="方法区"></a>方法区</h3><p>方法区是各个线程共享的内存区域(这样就能理解为什么需要线程同步和加锁了,当然还与java数据访问时数据复制来复制去有关),用于存储已被虚拟机加载的类信息,常量,静态变量,JIT即时编译后的代码等.<br>方法区的数据类型复杂,而且jvm规范也没有明确指定方法区的内存使用和回收策略,所以不同的虚拟机对于方法区的内存回收都有不同的机制.下文介绍.</p>
<h3 id="运行时常量池"><a href="#运行时常量池" class="headerlink" title="运行时常量池"></a>运行时常量池</h3><p>运行时常量池是方法区的一部分,存储编译时或者运行时产生的字面常量或者其他信息.</p>
<h3 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h3><p>堆也是被各个线程共享的内存区域,虚拟机主要管理的内存区域,是java存放对象数据的地方,这里面也有指针,因为对象数据里面可能还有其他对象的引用,还有方法区常量池常量的引用.还有数组也是在堆上分配内存.</p>
<h3 id="虚拟机栈"><a href="#虚拟机栈" class="headerlink" title="虚拟机栈"></a>虚拟机栈</h3><p>线程私有,与线程同生同灭.用于存储java运行时的内存模型,也就是每个方法执行时的一个栈帧,该栈帧存储了局部变量表,操作数栈,动态链表,方法出口等运行时信息.<br>对于一个方法开始执行到执行结束就是一个栈帧在虚拟机中入栈和出栈的过程.</p>
<h3 id="程序计数器"><a href="#程序计数器" class="headerlink" title="程序计数器"></a>程序计数器</h3><p>和虚拟栈帧一样,该内存区域的生命周期也是在一个线程的执行周期内.可以看作当前线程执行字节码行号的指示器,字节码的解释执行工作就是通过这个来确定循环,判断,跳转,异常处理以及线程恢复等功能.<br>每个线程拥有一个独立的程序计数器内存区域可以使得多线程环境下线程能接着上一个时间片继续执行.</p>
<h3 id="本地方法栈"><a href="#本地方法栈" class="headerlink" title="本地方法栈"></a>本地方法栈</h3><p>本地方法栈与虚拟机栈的作用几乎相同,不同的地方在于虚拟机栈用于服务java方法,而本地方法栈可以描述native方法,即虚拟机规范规定的可使用的其他语言.</p>
<h3 id="直接内存"><a href="#直接内存" class="headerlink" title="直接内存"></a>直接内存</h3><p>直接内存不是虚拟机运行时数据取的一部分<br>在jdk1.4后引入了一种通道和缓冲区的I/O方式,使用native函数库直接分配堆外内存,然后通过一个存储在java堆中的DirectByteBuffer对象作为这块内存的引用直接进行操作,这样能在一定的场景下显著提高性能,避免了在java堆中和native堆中来回复制数据.</p>
<h3 id="数据在上述内存区域的分布"><a href="#数据在上述内存区域的分布" class="headerlink" title="数据在上述内存区域的分布"></a>数据在上述内存区域的分布</h3><blockquote>
<p>对象的两种不同访问形式</p>
</blockquote>
<p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/1348658605_5211.jpg" alt="直接指针方式访问对象"><br><strong>这样看句柄就是一系列的指针和其他数据组成的数据结构,果然是要好好学习数据结构</strong><br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/1348659242_7055.jpg" alt="间接指针访问对象"></p>
<h2 id="jvm内存溢出"><a href="#jvm内存溢出" class="headerlink" title="jvm内存溢出"></a>jvm内存溢出</h2><blockquote>
<p>内存溢出即指上述内存区域存放的数据结构的总量大于限制的最大大小,导致虚拟机跑出内存溢出异常.</p>
</blockquote>
<h2 id="虚拟机垃圾收集器"><a href="#虚拟机垃圾收集器" class="headerlink" title="虚拟机垃圾收集器"></a>虚拟机垃圾收集器</h2><blockquote>
<p>如何判断对象需要被回收？<br>对于不同的算法有不同的判断方式</p>
</blockquote>
<h3 id="堆中垃圾回收算法"><a href="#堆中垃圾回收算法" class="headerlink" title="堆中垃圾回收算法"></a>堆中垃圾回收算法</h3><p><strong>引用计数算法</strong><br>给每个对象添加一个引用计数器，每当有一个地方引用它时，计数器加一，引用失效则减一。<br>优点：实现简单，判断效率高<br>缺点：当对象存在相互引用时，不能够回收此类对象<br><strong>可达性分析算法</strong><br>可达性算法的核心在于找到一系列的根节点，并且判断对象到这些根节点是否可达。<br>可作为根节点的对象有：</p>
<ol>
<li>虚拟机栈中引用的对象</li>
<li>方法取中静态属性引用的对象</li>
<li>方法取中常量引用的对象</li>
<li>本地方法栈中JNI引用的对象</li>
</ol>
<p><strong>四种引用</strong><br>强引用-软引用-弱引用-虚引用</p>
<h3 id="方法区中垃圾回收算法"><a href="#方法区中垃圾回收算法" class="headerlink" title="方法区中垃圾回收算法"></a>方法区中垃圾回收算法</h3><p><strong>标记-清除算法</strong><br>首先标记出所有需要回收的对象，在标记完成后统一进行回收，但是缺点就是会造成大量的内存碎片。导致之后给大的对象分配内存无可用空间。<br><strong>复制算法</strong><br>将可用的内存分为两半，一次只使用其中的一半，当使用完以后，将还活着的对象全部复制到另一半内存空间中，然后清理掉原来的那半内存，缺点就是代价太高，需要牺牲一半的内存。<br><strong>标记-整理算法</strong><br>将所有的对象像一端移动，然后直接清理掉其他的对象（98%的对象生命周期都很短）</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/11/24/emmet-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/24/emmet-usage/" itemprop="url">
                  前端开发神器emmet使用教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-11-24 20:20:22" itemprop="dateCreated datePublished" datetime="2015-11-24T20:20:22+08:00">2015-11-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-04-03 00:02:52" itemprop="dateModified" datetime="2016-04-03T00:02:52+08:00">2016-04-03</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/web前端/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Emmet的前身是大名鼎鼎的Zen coding</p>
<p>使用方法:结合下面的指令,然后摁下TAB键生效</p>
<p>该插件在eclipse,sublime,idea等开发工具上面都可以快速的安装</p>
</blockquote>
<p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/Emmet使用.png" alt="emmet快速参考"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/11/21/code-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/21/code-design/" itemprop="url">
                  设计模式总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-11-21 22:20:56" itemprop="dateCreated datePublished" datetime="2015-11-21T22:20:56+08:00">2015-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-04-03 00:02:32" itemprop="dateModified" datetime="2016-04-03T00:02:32+08:00">2016-04-03</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>学一样东西,自己另外举个例子实现一遍,才能知道里面的原理.记录一下学习的几种基本的设计模式</p>
</blockquote>
<h2 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h2><p><strong>几种设计模式的文件结构如下图所示</strong><br><img src="http://7xlqn0.com1.z0.glb.clouddn.com/fileList.png" alt="目录结构图"><br><strong>源代码下载</strong><br><a href="http://7xokxj.dl1.z0.glb.clouddn.com/codeDesign.tar.gz" target="_blank" rel="external">源码下载</a></p>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><blockquote>
<p>这里我举了一个网页渲染时使用代理延迟加载图片的例子,用线程的睡眠模拟延迟加载,hibernate的延迟加载就是用了代理模式实现<br>代理模式的主要应用:</p>
<ol>
<li>远程代理,例如webservice</li>
<li>虚拟代理,html渲染</li>
<li>安全代理,控制真实对象的访问权限</li>
</ol>
<p>spring的AOP就是用的代理模式的思想设计实现的</p>
</blockquote>
<h3 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h3><p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/proxy.png" alt="UML类图"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> codeDesign.proxy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/22.</div><div class="line"> * 网页绘制接口,代理和被代理类均实现该接口</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Draw</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 绘制图片，需要花很多时间，使用代理来绘制</div><div class="line">     * <span class="doctag">@param</span> url</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">drawPicture</span><span class="params">(String url)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.proxy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/22.</div><div class="line"> * 绘制html网页的类（该类会消耗很多时间）</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HtmlDraw</span> <span class="keyword">implements</span> <span class="title">Draw</span></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 该方法不耗时，不需要代理</div><div class="line">     * <span class="doctag">@param</span> text</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawText</span><span class="params">(String text)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"正在绘制文字:"</span> + text);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 会消耗一定的时间，需要代理</div><div class="line">     * <span class="doctag">@param</span> url</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawPicture</span><span class="params">(String url)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"图片区域正在从远程加载图片"</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            Thread.sleep(<span class="number">5000</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        System.out.println(<span class="string">"正在绘制图片:"</span>+url);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.proxy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/22.</div><div class="line"> * 图片绘制代理类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyDraw</span> <span class="keyword">implements</span> <span class="title">Draw</span> </span>&#123;</div><div class="line">    HtmlDraw htmlDraw;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyDraw</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.htmlDraw=<span class="keyword">new</span> HtmlDraw();</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawPicture</span><span class="params">(String url)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"代理先输出一张占位图片"</span>);</div><div class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                htmlDraw.drawPicture(<span class="string">"1.jpg"</span>);</div><div class="line">                System.out.println(<span class="string">"代理去掉占位图片"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.proxy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/22.</div><div class="line"> * 代理模式测试类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 该过程演示了网页的绘制过程，使用代理模式异步绘制网页上面的图片</div><div class="line">     * <span class="doctag">@param</span> args</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        HtmlDraw htmlDraw=<span class="keyword">new</span> HtmlDraw();</div><div class="line">        htmlDraw.drawText(<span class="string">"文字1"</span>);</div><div class="line">        ProxyDraw proxyDraw=<span class="keyword">new</span> ProxyDraw();</div><div class="line">        proxyDraw.drawPicture(<span class="string">"1.jpg"</span>);</div><div class="line">        htmlDraw.drawText(<span class="string">"文字2"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><blockquote>
<p>最基础的设计模式</p>
</blockquote>
<h3 id="类图-1"><a href="#类图-1" class="headerlink" title="类图"></a>类图</h3><p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/factory.png" alt="工厂模式UML类图"></p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> codeDesign.factory;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tea</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String sugar;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mixSugarTea</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="string">"只有"</span>+sugar);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSugar</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> sugar;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSugar</span><span class="params">(String sugar)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.sugar = sugar;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.factory;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 蓝茶</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlueTea</span> <span class="keyword">extends</span> <span class="title">Tea</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mixSugarTea</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="keyword">super</span>.getSugar()+<span class="string">"蓝茶"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.factory;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 红茶</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlackTea</span> <span class="keyword">extends</span> <span class="title">Tea</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mixSugarTea</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="keyword">super</span>.getSugar()+<span class="string">"红茶"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.factory;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 茶的工厂类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeaFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Tea <span class="title">getTea</span><span class="params">(String teaType)</span></span>&#123;</div><div class="line">        Tea tea;</div><div class="line">        <span class="keyword">switch</span> (teaType)&#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">"black"</span>:</div><div class="line">                tea=<span class="keyword">new</span> BlackTea();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"blue"</span>:</div><div class="line">                tea=<span class="keyword">new</span> BlueTea();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                tea=<span class="keyword">new</span> Tea();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> tea;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.factory;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 工厂模式测试</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Tea tea = TeaFactory.getTea(<span class="string">"black"</span>);</div><div class="line">        tea.setSugar(<span class="string">"红糖"</span>);</div><div class="line">        tea.mixSugarTea();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h2><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><blockquote>
<ol>
<li>如果只有一个Concrete Component类而没有抽象的Component接口时，可以让Decorator继承Concrete Component。</li>
<li>如果只有一个Concrete Decorator类时，可以将Decorator和Concrete Decorator合并。</li>
<li>java的io流包就是使用的装饰器模式</li>
</ol>
</blockquote>
<h3 id="类图-2"><a href="#类图-2" class="headerlink" title="类图"></a>类图</h3><p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/decorator.png" alt="装饰器模式UML类图"></p>
<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> codeDesign.decorator;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 汽车类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showFunc</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="string">"组装完毕"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.decorator;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 汽车的功能类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Function</span> <span class="keyword">extends</span> <span class="title">Car</span></span>&#123;</div><div class="line">    <span class="keyword">protected</span> Car car;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFuncs</span><span class="params">(Car car)</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.car=car;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showFunc</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">if</span> (car!=<span class="keyword">null</span>)&#123;</div><div class="line">            car.showFunc();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.decorator;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 制动功能</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BrakingFunction</span> <span class="keyword">extends</span> <span class="title">Function</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showFunc</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="string">"制动"</span>);</div><div class="line">        <span class="keyword">super</span>.showFunc();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.decorator;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * ABS防抱死功能</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ABSFunction</span> <span class="keyword">extends</span> <span class="title">Function</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showFunc</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.print(<span class="string">"ABS"</span>);</div><div class="line">        <span class="keyword">super</span>.showFunc();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.decorator;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 装饰模式测试</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecoratorTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Car car=<span class="keyword">new</span> Car();</div><div class="line">        ABSFunction abs=<span class="keyword">new</span> ABSFunction();</div><div class="line">        BrakingFunction braking=<span class="keyword">new</span> BrakingFunction();</div><div class="line">        abs.addFuncs(car);</div><div class="line">        braking.addFuncs(abs);</div><div class="line">        braking.showFunc();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><h3 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h3><blockquote>
<p>这里我结合了工厂模式,使得加密算法的选择逻辑不用暴露给客户端<br>Strategy中定义了公共算法的实现接口,然后通过多态在Context动态的创建不同的实现类的实例从而达到算法策略选择逻辑<br>简化单元测试,因为每一个具体的实现都在一个类里面,可以分开测试<br>减少了算法调用类和算法实现类之间的耦合</p>
</blockquote>
<h3 id="类图-3"><a href="#类图-3" class="headerlink" title="类图"></a>类图</h3><p><img src="http://7xlqn0.com1.z0.glb.clouddn.com/strategy.png" alt="策略模式UML类图"></p>
<h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> codeDesign.strategy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 加密算法接口</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EncryptStrategy</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 加密算法实现接口</div><div class="line">     * <span class="doctag">@param</span> rawString</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function">String <span class="title">doEncrypt</span><span class="params">(String rawString)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.strategy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * md5加密策略实现类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5Strategy</span> <span class="keyword">implements</span> <span class="title">EncryptStrategy</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doEncrypt</span><span class="params">(String rawString)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"MD5("</span>+rawString+<span class="string">")"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.strategy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * SHA1加密实现类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SHA1Strategy</span> <span class="keyword">implements</span> <span class="title">EncryptStrategy</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doEncrypt</span><span class="params">(String rawString)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"SHA1("</span>+rawString+<span class="string">")"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.strategy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 加密上下文维护类，客户端调用类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncryptContext</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> EncryptStrategy encryptStrategy;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> MD5=<span class="number">0</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> SHA1=<span class="number">1</span>;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 这里实现用工厂模式实现自动装载不同的类</div><div class="line">     * <span class="doctag">@param</span> method</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EncryptContext</span><span class="params">(Byte method)</span></span>&#123;</div><div class="line">        <span class="keyword">switch</span> (method)&#123;</div><div class="line">            <span class="keyword">case</span> MD5:</div><div class="line">                <span class="keyword">this</span>.encryptStrategy=<span class="keyword">new</span> MD5Strategy();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> SHA1:</div><div class="line">                <span class="keyword">this</span>.encryptStrategy=<span class="keyword">new</span> SHA1Strategy();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doEncrypt</span><span class="params">(String rawString)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> encryptStrategy.doEncrypt(rawString);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">package</span> codeDesign.strategy;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by kangbiao on 2015/11/21.</div><div class="line"> * 策略模式测试类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncryptTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        EncryptContext encryptContext=<span class="keyword">new</span> EncryptContext(EncryptContext.MD5);</div><div class="line">        String result=encryptContext.doEncrypt(<span class="string">"123456"</span>);</div><div class="line">        System.out.print(result);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/11/17/idea-15-feature/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/17/idea-15-feature/" itemprop="url">
                  IDEA15新特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-11-17 20:20:50" itemprop="dateCreated datePublished" datetime="2015-11-17T20:20:50+08:00">2015-11-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-02-19 21:11:08" itemprop="dateModified" datetime="2016-02-19T21:11:08+08:00">2016-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><ol>
<li>支持 Lambda 表达式 Debug ，之前版本只能使用推倒</li>
<li>Debug 时可强制方法 /表达式返回值</li>
</ol>
<h2 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面"></a>用户界面</h2><ol>
<li>测试 UI 提升，增加大量统计功能</li>
<li>“Find in Path”功能增加行内代码搜索</li>
<li>Run 的时候会出现小绿条，提示当前运行配置</li>
<li>增加对色弱 /色盲的配色支持</li>
<li>支持一键运行 /测试</li>
</ol>
<h2 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h2><ol>
<li>on-the-fly 冗余代码检测</li>
<li>表达式、返回值类型推断</li>
<li>可直接 encode 特殊的 HTML 字符，如 &gt; 会转换成 &gt;</li>
</ol>
<h2 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h2><ol>
<li>Kotlin 支持</li>
<li>Groovy 支持 2.3 版本中的 @Builder 注解</li>
<li>Scala 支持增强</li>
</ol>
<h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><ol>
<li>支持 Spring 4.2 特性</li>
<li>Spring Boot 支援更好，如 application.yml 、 initializer 提示与配置 </li>
<li>Grails 支持 3.X 版本</li>
<li>Arquilian &lt;- 我不懂是啥</li>
<li>Android 增加 Android Studio 1.3 的新特性</li>
</ol>
<h2 id="构建工具"><a href="#构建工具" class="headerlink" title="构建工具"></a>构建工具</h2><ol>
<li>Gradle/SBT &lt;- 引入时选择特定 modules</li>
</ol>
<h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><ol>
<li>TypeScript</li>
<li>React</li>
<li>AngularJS</li>
</ol>
<h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><ol>
<li>可直接在 Commit dialog 窗口中修改代码</li>
<li>支持 Rebase 功能</li>
<li>分支操作</li>
<li>Perforce 中的 Shelve （没用过）、 TFS 、 MQ 增强</li>
</ol>
<h2 id="数据库工具"><a href="#数据库工具" class="headerlink" title="数据库工具"></a>数据库工具</h2><blockquote>
<p>支持修改 Table 、多个查询窗口（终于支持了…）、执行计划（终于支持了…）</p>
</blockquote>
<h2 id="注册方法"><a href="#注册方法" class="headerlink" title="注册方法"></a>注册方法</h2><blockquote>
<p>注册码可以沿用14的,只是在 注册时选择 License server ，填 <a href="http://idea.lanyus.com" target="_blank" rel="external">http://idea.lanyus.com</a> ，然后点击 OK</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/11/17/bash-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/17/bash-review/" itemprop="url">
                  bash基础复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-11-17 09:40:44" itemprop="dateCreated datePublished" datetime="2015-11-17T09:40:44+08:00">2015-11-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-08-24 17:19:08" itemprop="dateModified" datetime="2016-08-24T17:19:08+08:00">2016-08-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/服务器/" itemprop="url" rel="index"><span itemprop="name">服务器</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="用户自定义变量"><a href="#用户自定义变量" class="headerlink" title="用户自定义变量"></a>用户自定义变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">name=<span class="string">"kangbiao"</span> <span class="comment">#变量定义等号两边不能够有空格</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$name</span>      <span class="comment">#输出变量值,调用变量需要在变量前加$</span></div><div class="line"><span class="built_in">unset</span> name      <span class="comment">#删除name变量</span></div></pre></td></tr></table></figure>
<p>数组变量定义<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 可以不用declare -a 指定该变量为数组</span></div><div class="line">name[0]=<span class="string">"aaa"</span></div><div class="line">name[1]=<span class="string">"bbb"</span></div></pre></td></tr></table></figure></p>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><blockquote>
<p>环境变量是全局变量,用户自定义变量是局部变量(对当前shell有效)<br>env 命令可以查看所有环境变量</p>
</blockquote>
<h3 id="语系变量"><a href="#语系变量" class="headerlink" title="语系变量"></a>语系变量</h3><blockquote>
<p>定义系统语言环境,注意linux shell是不支持中文的,只能通过插件实现终端支持中文<br>$LANG</p>
</blockquote>
<h3 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h3><blockquote>
<p>在脚本执行时获取用户输入参数</p>
</blockquote>
<table>
<thead>
<tr>
<th>位置变量</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>$n</td>
<td>n为数字,$0代表命令本身,$1-$9代表第一到第九个参数,十个以上${10}</td>
</tr>
<tr>
<td>$*</td>
<td>获取命令行中的所有参数,$*把所有的参数当做一个整体来看</td>
</tr>
<tr>
<td>$@</td>
<td>也是获取所有参数,不过把每个参数区别对待,可以for循环遍历</td>
</tr>
<tr>
<td>$#</td>
<td>代表命令行参数的个数</td>
</tr>
</tbody>
</table>
<h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><blockquote>
<p>可用于判断命令执行结果,以及结束自身进程等</p>
</blockquote>
<table>
<thead>
<tr>
<th>域定义变量</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>$?</td>
<td>最后一次命令执行后的返回结果,为0代表成功,非0代表失败</td>
</tr>
<tr>
<td>$$</td>
<td>当前进程的进程号(PID)</td>
</tr>
<tr>
<td>$!</td>
<td>后台运行的最后一个进程的进程号(PID)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>read [选项] [变量名]<br>eg:read -p “please enter your name:” name</p>
</blockquote>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="declare-命令"><a href="#declare-命令" class="headerlink" title="declare 命令"></a>declare 命令</h3><blockquote>
<p>declare [+/-] [选项]</p>
<blockquote>
<p>+是取消属性,-是设定属性<br>eg:declare -a arr 将变量arr声明为数组型<br>eg:declare -i num 将变量num声明为整型</p>
</blockquote>
<p>declare -i var 可以实现数值运算</p>
<blockquote>
<p>eg:declare -i sum=num1+num2 num1和num2可以不是整型,会自动转换</p>
</blockquote>
<p>export 其实就是调用了declare命令将变量声明为环境变量</p>
</blockquote>
<h3 id="数值运算"><a href="#数值运算" class="headerlink" title="数值运算"></a>数值运算</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 方法一 声明法</span></div><div class="line">a=1</div><div class="line">b=2</div><div class="line"><span class="built_in">declare</span> -i c=<span class="variable">$a</span>+<span class="variable">$b</span></div><div class="line"><span class="comment"># 方法二</span></div><div class="line">c=$(expr <span class="variable">$a</span> + <span class="variable">$b</span>) <span class="comment"># 执行expr命令后将命令结果返回给c,单小括号是将系统命令执行结果赋给变量</span></div><div class="line"><span class="comment"># 方法三</span></div><div class="line">c=$((<span class="variable">$a</span>+<span class="variable">$b</span>)) <span class="comment">#推荐</span></div><div class="line">c=$[<span class="variable">$a</span>+<span class="variable">$b</span>] <span class="comment"># if判断语句使用的方法</span></div></pre></td></tr></table></figure>
<h2 id="环境变量配置文件"><a href="#环境变量配置文件" class="headerlink" title="环境变量配置文件"></a>环境变量配置文件</h2><h3 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h3><blockquote>
<p>准备知识:目录刚刚创建的最大权限是777,而文件刚创建时的权限是666,即任何用户都不能执行该文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">若<span class="built_in">umask</span>=022</div><div class="line">则新创建的文件权限为rw-rw-rw- 抵消掉相同的权限 ----w--w-  后为 rw-r--r--</div><div class="line">新创建的目录的权限为rwxrwxrwx抵消掉相同的权限----w--w- 后为 rwxr-xr-x</div></pre></td></tr></table></figure>
<blockquote>
<p>source file 加载环境变量配置文件</p>
</blockquote>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h2 id="条件判断和流程控制"><a href="#条件判断和流程控制" class="headerlink" title="条件判断和流程控制"></a>条件判断和流程控制</h2><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/11/14/javaweb-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/14/javaweb-review/" itemprop="url">
                  javaweb基础复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-11-14 16:30:00" itemprop="dateCreated datePublished" datetime="2015-11-14T16:30:00+08:00">2015-11-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-04-10 21:32:40" itemprop="dateModified" datetime="2016-04-10T21:32:40+08:00">2016-04-10</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><h3 id="JSP指令标识"><a href="#JSP指令标识" class="headerlink" title="JSP指令标识"></a>JSP指令标识</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">基本格式:<span class="tag">&lt;<span class="name">%@</span> 指令名 属性<span class="attr">1</span>=<span class="string">""</span> 属性<span class="attr">2</span>=<span class="string">""</span>  %&gt;</span></div><div class="line">page指令:<span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">""</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> %&gt;</span> 每个jsp必须有的标识</div><div class="line">include指令:<span class="tag">&lt;<span class="name">%@</span> <span class="attr">include</span> <span class="attr">file</span>=<span class="string">"jspFilePath"</span> %&gt;</span> 可用于包含其他文件</div><div class="line">标签库指令(taglib):<span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">""</span> <span class="attr">uri</span>=<span class="string">""</span> %&gt;</span> ,引入该指令后可以扩展jsp文件的标签,简化jsp文件内容,常用的标签库有JSTL,SPRING,STRUCTS等.</div></pre></td></tr></table></figure>
<h3 id="JSP动作标识"><a href="#JSP动作标识" class="headerlink" title="JSP动作标识"></a>JSP动作标识</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">基本格式:<span class="tag">&lt;<span class="name">标识名</span> 属性<span class="attr">1</span>=<span class="string">""</span> 属性<span class="attr">2</span>=<span class="string">""</span>/&gt;</span> (支持嵌套标签)</div><div class="line"><span class="tag">&lt;<span class="name">jsp:include</span> <span class="attr">page</span>=<span class="string">"静态或者动态文件的路径"</span> <span class="attr">flush</span>=<span class="string">"true|false"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">"重定向的目标文件地址"</span> /&gt;</span>  外部重定向标签,将用户请求重定向到指定页面</div><div class="line"><span class="tag">&lt;<span class="name">jsp:param</span> <span class="attr">name</span>=<span class="string">"参数名"</span> <span class="attr">value</span>=<span class="string">"参数值"</span> /&gt;</span>  作为其他动作标识的子标识.为其他标识传递参数</div><div class="line"><span class="tag">&lt;<span class="name">jsp:useBean</span> /&gt;</span></div></pre></td></tr></table></figure>
<h2 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h2><blockquote>
<p>java内置对象为什么不需要实例化?因为jsp文件在被解析成一个servlet后会在其java文件里通过工厂方法获取到对应对象的实例<br>所以jsp内置对象只是隐示的不需要实例化相应的对象.因为web容器能够自动实例化<a href="http://www.mamicode.com/info-detail-518906.html" target="_blank" rel="external">参考资料</a><br>request , response , session , application , out , page , config , exception , pageContext</p>
</blockquote>
<h3 id="特殊说明"><a href="#特殊说明" class="headerlink" title="特殊说明"></a>特殊说明</h3><blockquote>
<p>session.invalidata()方法销毁session会话,session.removeAttribute()只是移除属性<br>application对象作用域为应用程序全局,可用于统计网站访问量,也可以通过getInitParameter(String name)方法获取web应用配置信息<br>config对象主要用来获取web.xml中的配置信息,功能和application有所重复</p>
</blockquote>
<h3 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h3><blockquote>
<p>通过request.getHeader(“referer)获取请求源地址后与服务器主机地址做对比可以简单的防止跨域提交</p>
</blockquote>
<h2 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote>
<p>servlet是一个标准,是java servlet API的实现和相关类的方法的组合,由web容器创建并管理其生命周期<br>servlet的两种配置方式:注解配置和web.xml文件配置<br>servlet作为业务逻辑层,将jsp中的请求响应对象放入servlet中,可以更好的将web应用分层,提高其可维护性</p>
</blockquote>
<h3 id="servlet过滤器"><a href="#servlet过滤器" class="headerlink" title="servlet过滤器"></a>servlet过滤器</h3><blockquote>
<p>定义一个实现Filter类的过滤器类即可<br>过滤器的两种配置方式:基于注解配置(在Filter实现类上加@urlPatterns={“/*”})或者在web.xml文件中配置<br>应用:登陆过滤,字符编码过滤,个性化过滤</p>
</blockquote>
<h3 id="servlet监听器"><a href="#servlet监听器" class="headerlink" title="servlet监听器"></a>servlet监听器</h3><blockquote>
<p>监听web容器的有效期时间,由容器管理</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangbiao.org/2015/10/23/estate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kangbiao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kingber">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/10/23/estate/" itemprop="url">
                  VerPass接口设计文档
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-10-23 12:47:44" itemprop="dateCreated datePublished" datetime="2015-10-23T12:47:44+08:00">2015-10-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2016-07-28 19:32:20" itemprop="dateModified" datetime="2016-07-28T19:32:20+08:00">2016-07-28</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/接口文档/" itemprop="url" rel="index"><span itemprop="name">接口文档</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>2015-11-20修订记录</strong></p>
<ol>
<li>增加安卓端检查更新接口</li>
</ol>
<p><strong>2015-11-12修订记录</strong></p>
<ol>
<li>新增获取该用户有权限的所有密钥接口</li>
</ol>
<p><strong>2015-10-24修订记录</strong></p>
<ol>
<li>返回的物业信息增加该物业所属的楼栋信息</li>
<li>删掉了投诉评价接口,只能上报投诉和查看投诉</li>
</ol>
<p><strong>2015-10-23修订记录(多角色修改):</strong></p>
<ol>
<li>修改了获取用户角色接口,返回角色代码由原来的单数字字段变为逗号分隔的字符串 ,因为一个用户可能是业主或者租客</li>
<li>修改了报修模块获取我的报修接口,数据有所增加.将图片路径直接返回,不需要作二次请求,同时增加返回维修人员信息</li>
<li>新增确认报修完成接口,客户端可以确认该报修已经完成.需要确认完成后才能评论.具体参见评论报修接口说明</li>
<li>新增上传开锁记录接口</li>
<li>修改获取我的所有物业接口</li>
<li>修改业主获取绑定用户接口</li>
<li>修改获取一定数量的公告接口</li>
<li>增加公告通过webview获取公告的接口(根据公告id获取公告详情)</li>
<li>将申请绑定接口从用户中心模块移到物业模块,修改了接口访问地址</li>
</ol>
<blockquote>
<p>该文档为描述物业管理系统服务器端与APP端的数据交互。</p>
<p>文档里面参数的值为全大写的地方,值的范围只能是状态码对照表规定变量的范围之内,如:USER_ROLE只能为1,2或者3中的一个,否则服务器会返回参数异常错误.</p>
<p>文档里面的数据为举例数据。</p>
<p>接口基于restful风格的URL.</p>
<p>—— <a href="mailto:kangbiao@kangbiao.org">批注</a>(康彪)</p>
<p><strong><em>编码规范</em></strong><br><em>错误代码</em>:<br>web端错误代码规范:采用6位数字作为错误代码<br>最高位为0,四五位为模块代码,二三位为错误详情,最后一位作为扩展.</p>
<p>app端错误代码规范:采用6位数字作为错误代码<br>最高两位为1,四五位为模块代码,二三位为错误详情,最后一位作为扩展,模块位全为0为程序异常<br>例:000030:web端00模块的03方法发生错误.</p>
<p><em>数据格式</em>:<br>数据格式基于json<br>jsonString的值为空时为null,不会是空数组或者空字符串,基本格式如下:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>/<span class="literal">false</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>/string,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span>/string</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: array or object or <span class="literal">null</span> or string or basictype</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果status为false,客户端需要根据errorMsg进行相应的业务处理,如果为true,则从jsonString里面取出业务数据处理,展示</p>
</blockquote>
<p><strong>状态码对照表</strong>:</p>
<table>
<thead>
<tr>
<th>数据项</th>
<th>变量</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>app用户状态</td>
<td>USER_STATUS</td>
<td>-1(禁用)</td>
<td>1(正常)</td>
<td>0(待审核)</td>
<td></td>
</tr>
<tr>
<td>app用户角色</td>
<td>USER_ROLE</td>
<td>1(家庭成员)</td>
<td>2(租户)</td>
<td>3(业主)</td>
<td></td>
</tr>
<tr>
<td>性别</td>
<td>SEX</td>
<td>0(男)</td>
<td>1(女)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>证件类型</td>
<td>CARD_TYPE</td>
<td>0(身份证)</td>
<td>1(军官证)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门禁权限是否可用</td>
<td>DOOR_AUTHORITY</td>
<td>0(不可用)</td>
<td>1(可用)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>维修状态</td>
<td>REPAIR_STATUS</td>
<td>0(待处理)</td>
<td>1(处理中)</td>
<td>2(处理完待评价)</td>
<td>3(已评价)</td>
</tr>
<tr>
<td>费用收费单位</td>
<td>FEE_UNIT</td>
<td>family(按户)</td>
<td>square(按平米)</td>
<td>per(按次)</td>
<td></td>
</tr>
<tr>
<td>账单状态</td>
<td>BILL_STATUS</td>
<td>0(未缴费)</td>
<td>1(已缴费)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>投诉状态</td>
<td>COMPLAIN_STATUS</td>
<td>0(待处理)</td>
<td>1(已处理待评价)</td>
<td>2(已评价)</td>
<td></td>
</tr>
<tr>
<td>投诉主题</td>
<td>COMPLAIN_TYPE</td>
<td>0(类型一)</td>
<td>1(类型二)</td>
<td>2(类型三)</td>
<td></td>
</tr>
<tr>
<td>物业类型</td>
<td>PROPERTY_TYPE</td>
<td>1(商户)</td>
<td>2(住宅)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>物业状态</td>
<td>PROPERTY_STATUS</td>
<td>-1(出租)</td>
<td>1(自用)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>车位类型</td>
<td>PARKLOT_TYPE</td>
<td>1(小车位)</td>
<td>2(中车位)</td>
<td>3(大车位)</td>
<td></td>
</tr>
<tr>
<td>费用类型</td>
<td>FEE_TYPE</td>
<td>0(物业费)</td>
<td>1(服务费)</td>
<td>2(车位费)</td>
<td></td>
</tr>
<tr>
<td>门禁密钥类型</td>
<td>SECRET_TYPE</td>
<td>1(楼栋)</td>
<td>2(道闸)</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>错误代码对照表</strong></p>
<table>
<thead>
<tr>
<th>code</th>
<th>描述</th>
<th>错误级别</th>
</tr>
</thead>
<tbody>
<tr>
<td>100000</td>
<td>客户端参数错误</td>
<td>高</td>
</tr>
<tr>
<td>100001</td>
<td>服务器未知异常</td>
<td>高</td>
</tr>
</tbody>
</table>
<h2 id="app端接口"><a href="#app端接口" class="headerlink" title="app端接口"></a><strong>app端接口</strong></h2><h2 id="用户中心-01"><a href="#用户中心-01" class="headerlink" title="用户中心 (01)"></a>用户中心 (01)</h2><h3 id="登陆"><a href="#登陆" class="headerlink" title="登陆"></a>登陆</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/login<br><em>请求方法</em>:GET/POST<br><em>请求参数</em>:<br>phone: 18144240528<br>password: md5(123456)</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="attr">"status"</span>:<span class="literal">false</span>,</div><div class="line">	<span class="attr">"errorMsg"</span>:</div><div class="line">	&#123;</div><div class="line">		<span class="attr">"code"</span>:<span class="number">10001</span>,</div><div class="line">		<span class="attr">"description"</span>:<span class="string">"请输入11位手机号"</span></div><div class="line">	&#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="退出登陆"><a href="#退出登陆" class="headerlink" title="退出登陆"></a>退出登陆</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/loginOut<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="密码找回"><a href="#密码找回" class="headerlink" title="密码找回"></a>密码找回</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/findPassword/{userPhone}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/findPassword/checkVerifyCode/{code}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/findPassword/reset/{newPassword}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/register/getVerifyCode/{phone}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="string">"100200/100210"</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"电话号码已经注册/请输入正确的手机号"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/register/checkVerifyCode/{verifyCode}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="string">"100220"</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"验证码错误"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/register/doRegister<br><em>请求方式</em>:GET<br>参数:<br>nickname:kangbiao<br>password:md5(123456)</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="string">"100000(已经是业主)/100001(没有任何绑定)"</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"如果已经是业主的话,后端会自动绑定所有物业,如果不是业主且没有任何绑定,则需要进入绑定物业界面,至于用户想要绑定其他物业,则可以在进入app后再绑定"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/modify/password<br><em>请求方式</em>:GET<br>参数:<br>oldPassword:md5(123456)<br>newPassword:md5(234568)</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"原密码错误"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="修改个人资料"><a href="#修改个人资料" class="headerlink" title="修改个人资料"></a>修改个人资料</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/modify/getProfile<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: &#123;</div><div class="line">        <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">        <span class="attr">"phone"</span>: <span class="string">"18144240528"</span>,</div><div class="line">        <span class="attr">"name"</span>: <span class="string">"康彪"</span>,</div><div class="line">        <span class="attr">"sex"</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">"birthday"</span>: <span class="number">150515510000</span>,</div><div class="line">        <span class="attr">"urgentName"</span>: <span class="string">"小明"</span>,</div><div class="line">        <span class="attr">"urgentPhone"</span>: <span class="string">"131627828989"</span>,</div><div class="line">        <span class="attr">"identityType"</span>: <span class="number">1</span>,</div><div class="line">        <span class="attr">"identityCode"</span>: <span class="string">"510704199405281715"</span>,</div><div class="line">        <span class="attr">"vehicleIdIst"</span>: <span class="string">"5426d;dsds5"</span>,</div><div class="line">        <span class="attr">"propertyIdList"</span>: <span class="string">"1;2"</span>,</div><div class="line">        <span class="attr">"authenticationTime"</span>: <span class="number">1541214000</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/uc/modify/submitProfile<br><em>请求方式</em>:POST<br>参数:<br>name:姓名<br>birthday:出生日期<br>urgentName:紧急联系人姓名<br>urgentPhone:紧急联系人电话<br>identityType:CARD_TYPE<br>identityCode:证件号码<br>sex:SEX</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"原密码错误"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取用户角色"><a href="#获取用户角色" class="headerlink" title="获取用户角色"></a>获取用户角色</h3><blockquote>
<p><em>请求URL</em>:api/uc/getRole<br><em>请求方式</em>:GET<br><em>说明</em>:由于现在是一个用户可以有多个角色关系,所以返回的USER_ROLE的值为1,2,3中的一个或多个,用逗号分割</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: <span class="string">"1,2"</span>或者<span class="string">"1"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="推送-02"><a href="#推送-02" class="headerlink" title="推送(02)"></a>推送(02)</h2><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/push<br><em>请求方式</em>:GET<br><em>参数</em>:<br>type:<br>info:</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="投诉-03"><a href="#投诉-03" class="headerlink" title="投诉(03)"></a>投诉(03)</h2><h3 id="增加投诉"><a href="#增加投诉" class="headerlink" title="增加投诉"></a>增加投诉</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/complain/add<br><em>请求方式</em>:POST<br><em>参数</em>:<br>title:投诉标题<br>content:投诉内容<br>file[]:图片</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"图片上传错误"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取我的投诉"><a href="#获取我的投诉" class="headerlink" title="获取我的投诉"></a>获取我的投诉</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/complain/getMyComplain<br><em>请求方式</em>:GET<br><em>参数</em>:<br>status:COMPLAIN_STATUS,不加参数则返回所有投诉.result为投诉处理结果说明.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">5</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"楼下太吵"</span>,</div><div class="line">            <span class="attr">"content"</span>: <span class="string">"dfssad"</span>,</div><div class="line">            <span class="attr">"description"</span>: <span class="string">"打算倒萨"</span>,</div><div class="line">            <span class="attr">"phone"</span>: <span class="string">"18144240528"</span>,</div><div class="line">            <span class="attr">"time"</span>: <span class="number">23663323056</span>,</div><div class="line">            <span class="attr">"imageIdList"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"status"</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">"cuId"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"remark"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"result"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"consoleUserEntity"</span>: <span class="literal">null</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">18</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"测试投诉"</span>,</div><div class="line">            <span class="attr">"content"</span>: <span class="string">"测试投诉"</span>,</div><div class="line">            <span class="attr">"description"</span>: <span class="string">"测试投诉"</span>,</div><div class="line">            <span class="attr">"phone"</span>: <span class="string">"18144240528"</span>,</div><div class="line">            <span class="attr">"time"</span>: <span class="number">1445666212672</span>,</div><div class="line">            <span class="attr">"imageIdList"</span>: <span class="string">"/oa/file/picture/20151024135652_286.jpg,/oa/file/picture/20151024135652_263.png"</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"status"</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">"cuId"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"remark"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"result"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"consoleUserEntity"</span>: <span class="literal">null</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="报修-04"><a href="#报修-04" class="headerlink" title="报修(04)"></a>报修(04)</h2><h3 id="增加报修"><a href="#增加报修" class="headerlink" title="增加报修"></a>增加报修</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/repair/add<br><em>请求方式</em>:POST<br><em>参数</em>:<br>title:报修主题<br>content:报修内容<br>file[]:图片(可选字段)</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取我的报修"><a href="#获取我的报修" class="headerlink" title="获取我的报修"></a>获取我的报修</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/repair/getMyRepair<br><em>请求方式</em>:GET<br><em>参数</em>:<br>status:REPAIR_STATUS(不加则返回所有状态的报修)<br><em>说明</em>:imageIdList为逗号分隔的图片路径的字符串,不是原来的id字符串,另外当status为1(处理中)时,维修人员信息在repairManEntity里面.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">15</span>,</div><div class="line">            <span class="attr">"phone"</span>: <span class="string">"18144240528"</span>,</div><div class="line">            <span class="attr">"repairManId"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"test"</span>,</div><div class="line">            <span class="attr">"content"</span>: <span class="string">"报修测试"</span>,</div><div class="line">            <span class="attr">"description"</span>: <span class="string">"报修测试"</span>,</div><div class="line">            <span class="attr">"submitTime"</span>: <span class="number">1445598807245</span>,</div><div class="line">            <span class="attr">"processTime"</span>: <span class="number">1445599123885</span>,</div><div class="line">            <span class="attr">"finishTime"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"imageIdList"</span>: <span class="string">"/oa/file/picture/20151023191327_823.jpg,/oa/file/picture/20151023191327_820.jpg"</span>,</div><div class="line">            <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"remark"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"remarkText"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"cuId"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"result"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"repairManEntity"</span>: &#123;</div><div class="line">                <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"phone"</span>: <span class="string">"15114052120"</span>,</div><div class="line">                <span class="attr">"name"</span>: <span class="string">"小明"</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="确认报修完成"><a href="#确认报修完成" class="headerlink" title="确认报修完成"></a>确认报修完成</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/repair/confirmFinish/{repairID}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="评论报修"><a href="#评论报修" class="headerlink" title="评论报修"></a>评论报修</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/repair/remark<br><em>请求方式</em>:POST<br><em>参数</em>:<br>id:报修id<br>remark:评分(0-100)<br>comment:文字评论<br><em>说明</em>:只用当报修状态为2时才可以评论报修</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="费用相关-05"><a href="#费用相关-05" class="headerlink" title="费用相关(05)"></a>费用相关(05)</h2><h3 id="获取账单"><a href="#获取账单" class="headerlink" title="获取账单"></a>获取账单</h3><blockquote>
<p><em>请求URL</em>:api/fee/getBill<br><em>请求方式</em>:GET<br><em>参数</em>:<br>status:BILL_STATUS(不加则返回所有状态的账单)</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"total"</span>: <span class="string">"400.0"</span>,</div><div class="line">            <span class="attr">"items"</span>: [</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="string">"水电费"</span>,</div><div class="line">                    <span class="attr">"text"</span>: <span class="string">"100"</span></div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="string">"停车费"</span>,</div><div class="line">                    <span class="attr">"text"</span>: <span class="string">"100"</span></div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="string">"煤气费"</span>,</div><div class="line">                    <span class="attr">"text"</span>: <span class="string">"200"</span></div><div class="line">                &#125;</div><div class="line">            ],</div><div class="line">            <span class="attr">"status"</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">"billTime"</span>: <span class="string">"1976-03"</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="物业费缴纳"><a href="#物业费缴纳" class="headerlink" title="物业费缴纳"></a>物业费缴纳</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/fee/submitBill<br><em>请求方式</em>:POST<br><em>参数</em>:<br>billIDs:1,2<br><em>说明</em>:客户端调用支付平台的接口后,根据返回结果判断是否成功,服务器根据回调方法判断是否成功</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"账单缴费失败"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="门禁相关06"><a href="#门禁相关06" class="headerlink" title="门禁相关06)"></a>门禁相关06)</h2><h3 id="获取门禁密钥"><a href="#获取门禁密钥" class="headerlink" title="获取门禁密钥"></a>获取门禁密钥</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/auth/getSecret/{symbol}<br><em>请求方式</em>:GET<br><em>说明</em>:{symbol}为唯一标识蓝牙或者wifi的值</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: &#123;</div><div class="line">        <span class="attr">"id"</span>: <span class="number">11</span>,</div><div class="line">        <span class="attr">"controlId"</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">"symbol"</span>: <span class="string">"YCWY_D_001"</span>,</div><div class="line">        <span class="attr">"villageId"</span>: <span class="number">4</span>,</div><div class="line">        <span class="attr">"secret"</span>: <span class="string">"00000000"</span>,</div><div class="line">        <span class="attr">"password"</span>: <span class="string">"01234567"</span>,</div><div class="line">        <span class="attr">"type"</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取该用户有权限的所有密钥"><a href="#获取该用户有权限的所有密钥" class="headerlink" title="获取该用户有权限的所有密钥"></a>获取该用户有权限的所有密钥</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/auth/getAllowSecret<br><em>请求方式</em>:GET<br><em>说明</em>:根据controlType区分楼栋,园区和道闸</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">39</span>,</div><div class="line">            <span class="attr">"controlType"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"symbol"</span>: <span class="string">"YC_D_0012"</span>,</div><div class="line">            <span class="attr">"secret"</span>: <span class="string">"12345678"</span>,</div><div class="line">            <span class="attr">"password"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"controlEntity"</span>: <span class="string">"园区一"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">29</span>,</div><div class="line">            <span class="attr">"controlType"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"symbol"</span>: <span class="string">"YC_D_002"</span>,</div><div class="line">            <span class="attr">"secret"</span>: <span class="string">"123456789"</span>,</div><div class="line">            <span class="attr">"password"</span>: <span class="string">"123456"</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"controlEntity"</span>: <span class="string">"园区1的楼栋1"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">28</span>,</div><div class="line">            <span class="attr">"controlType"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"symbol"</span>: <span class="string">"YC_D_001"</span>,</div><div class="line">            <span class="attr">"secret"</span>: <span class="string">"123456789"</span>,</div><div class="line">            <span class="attr">"password"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"controlEntity"</span>: <span class="string">"道闸一"</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="上传开锁记录"><a href="#上传开锁记录" class="headerlink" title="上传开锁记录"></a>上传开锁记录</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/auth/uploadDoorLog<br><em>请求方式</em>:POST<br><em>参数</em>：<br>symbol:蓝牙或者wifi的唯一标识<br>status:０(失败)／１(成功)<br>description:开门失败的描述（失败后必须返回该字段）<br>level:严重级别（０为软件故障，１为门禁硬件故障，２为用户手机因素，３为用户操作有误，４为其他。失败后必须返回该字段）<br><em>说明</em>:如果status为false,应该把错误信息写入ａｐｐ日志.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>:<span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="物业相关-07"><a href="#物业相关-07" class="headerlink" title="物业相关(07)"></a>物业相关(07)</h2><h3 id="获取所有园区"><a href="#获取所有园区" class="headerlink" title="获取所有园区"></a>获取所有园区</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/query/getAllVillage<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: [&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"text"</span>:<span class="string">"园区一"</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"text"</span>:<span class="string">"园区二"</span>&#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="根据园区id获取所有的楼栋"><a href="#根据园区id获取所有的楼栋" class="headerlink" title="根据园区id获取所有的楼栋"></a>根据园区id获取所有的楼栋</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/query/getBuilding/{villageID}<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: [&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"text"</span>:<span class="string">"楼栋一"</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"text"</span>:<span class="string">"楼栋二"</span>&#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="根据园区id和楼栋id获取所有的物业"><a href="#根据园区id和楼栋id获取所有的物业" class="headerlink" title="根据园区id和楼栋id获取所有的物业"></a>根据园区id和楼栋id获取所有的物业</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/query/getProperty<br><em>请求方式</em>:GET<br><em>参数</em>:<br>villageID:2<br>buildingID:3</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: [&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"text"</span>:<span class="string">"物业一"</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"text"</span>:<span class="string">"二"</span>&#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="用户申请绑定"><a href="#用户申请绑定" class="headerlink" title="用户申请绑定"></a>用户申请绑定</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/property/bind<br><em>请求方式</em>:POST<br>参数:<br>role:USER_ROLE<br>villageID:1<br>buildingID:2<br>propertyID:2</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"status"</span>: <span class="literal">false</span>,</div><div class="line">   <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">       <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">       <span class="attr">"description"</span>: <span class="string">"您已申请或已经绑定到该物业,请不要重复申请"</span></div><div class="line">   &#125;,</div><div class="line">   <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取我的所有物业"><a href="#获取我的所有物业" class="headerlink" title="获取我的所有物业"></a>获取我的所有物业</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/property/getMyPropery<br><em>请求方式</em>:GET<br><em>说明</em>:每个propertyEntity均对应一种用户角色(userRole),status字段为表明该绑定是待审核还是已通过审核.通过userRole字段判断该物业是我名下的物业还是我申请绑定的物业.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"userRole"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"propertyEntity"</span>: &#123;</div><div class="line">                <span class="attr">"id"</span>: <span class="number">28</span>,</div><div class="line">                <span class="attr">"code"</span>: <span class="string">"A001"</span>,</div><div class="line">                <span class="attr">"location"</span>: <span class="string">"半山蓝湾一单元"</span>,</div><div class="line">                <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"propertySquare"</span>: <span class="number">115.55</span>,</div><div class="line">                <span class="attr">"ownerType"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"villageId"</span>: <span class="number">5</span>,</div><div class="line">                <span class="attr">"buildingId"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"openDoorStatus"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"modifyTime"</span>: <span class="number">1445581460913</span>,</div><div class="line">                <span class="attr">"buildingEntity"</span>: &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">"villageId"</span>: <span class="number">5</span>,</div><div class="line">                    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">                    <span class="attr">"buildingCode"</span>: <span class="string">"G1B1"</span>,</div><div class="line">                    <span class="attr">"buildingName"</span>: <span class="string">"园区1的楼栋1"</span>,</div><div class="line">                    <span class="attr">"villageEntity"</span>: &#123;</div><div class="line">                        <span class="attr">"id"</span>: <span class="number">5</span>,</div><div class="line">                        <span class="attr">"code"</span>: <span class="string">"YQ001"</span>,</div><div class="line">                        <span class="attr">"name"</span>: <span class="string">"园区一"</span>,</div><div class="line">                        <span class="attr">"description"</span>: <span class="string">""</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"userRole"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"propertyEntity"</span>: &#123;</div><div class="line">                <span class="attr">"id"</span>: <span class="number">29</span>,</div><div class="line">                <span class="attr">"code"</span>: <span class="string">"A002"</span>,</div><div class="line">                <span class="attr">"location"</span>: <span class="string">"半山蓝湾二单元"</span>,</div><div class="line">                <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"propertySquare"</span>: <span class="number">222.11</span>,</div><div class="line">                <span class="attr">"ownerType"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"villageId"</span>: <span class="number">5</span>,</div><div class="line">                <span class="attr">"buildingId"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"openDoorStatus"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"modifyTime"</span>: <span class="number">1345504275966</span>,</div><div class="line">                <span class="attr">"buildingEntity"</span>: &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">"villageId"</span>: <span class="number">5</span>,</div><div class="line">                    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">                    <span class="attr">"buildingCode"</span>: <span class="string">"G1B1"</span>,</div><div class="line">                    <span class="attr">"buildingName"</span>: <span class="string">"园区1的楼栋1"</span>,</div><div class="line">                    <span class="attr">"villageEntity"</span>: &#123;</div><div class="line">                        <span class="attr">"id"</span>: <span class="number">5</span>,</div><div class="line">                        <span class="attr">"code"</span>: <span class="string">"YQ001"</span>,</div><div class="line">                        <span class="attr">"name"</span>: <span class="string">"园区一"</span>,</div><div class="line">                        <span class="attr">"description"</span>: <span class="string">""</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="业主获取绑定用户"><a href="#业主获取绑定用户" class="headerlink" title="业主获取绑定用户"></a>业主获取绑定用户</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/property/getBind<br><em>请求方式</em>:GET<br><em>参数</em>:<br>status:USER_STATUS,不加则返回所有状态的绑定<br><em>说明</em>:如下例子代表xiaoming和xiaozhang分别请求以家庭成员和租客的身份绑定到物业编号为A001的物业上面,根据status得出两人的状态都是待审核.该示例数据仅为一个物业的绑定审核,一个业主会有多个物业,bindId字段标识一个绑定关系.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"propertyEntity"</span>: &#123;</div><div class="line">                <span class="attr">"id"</span>: <span class="number">28</span>,</div><div class="line">                <span class="attr">"code"</span>: <span class="string">"A001"</span>,</div><div class="line">                <span class="attr">"location"</span>: <span class="string">"半山蓝湾一单元"</span>,</div><div class="line">                <span class="attr">"type"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"propertySquare"</span>: <span class="number">115.55</span>,</div><div class="line">                <span class="attr">"ownerType"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"openDoorStatus"</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">"modifyTime"</span>: <span class="number">1445581460913</span>,</div><div class="line">                <span class="attr">"buildingEntity"</span>: &#123;</div><div class="line">                    <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">                    <span class="attr">"buildingCode"</span>: <span class="string">"G1B1"</span>,</div><div class="line">                    <span class="attr">"buildingName"</span>: <span class="string">"园区1的楼栋1"</span>,</div><div class="line">                    <span class="attr">"villageEntity"</span>: &#123;</div><div class="line">                        <span class="attr">"id"</span>: <span class="number">5</span>,</div><div class="line">                        <span class="attr">"code"</span>: <span class="string">"YQ001"</span>,</div><div class="line">                        <span class="attr">"name"</span>: <span class="string">"园区一"</span>,</div><div class="line">                        <span class="attr">"description"</span>: <span class="string">""</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">"bindUserInfos"</span>: [</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"bindId"</span>: <span class="number">5</span>,</div><div class="line">                    <span class="attr">"role"</span>: <span class="number">2</span>,</div><div class="line">                    <span class="attr">"status"</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">"appUserEntity"</span>: &#123;</div><div class="line">                        <span class="attr">"phone"</span>: <span class="string">"13981111434"</span>,</div><div class="line">                        <span class="attr">"nickname"</span>: <span class="string">"xiaozhang"</span>,</div><div class="line">                        <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">                        <span class="attr">"registerTime"</span>: <span class="number">155515151500</span>,</div><div class="line">                        <span class="attr">"lastLogin"</span>: <span class="number">155212121000</span></div><div class="line">                    &#125;</div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"bindId"</span>: <span class="number">6</span>,</div><div class="line">                    <span class="attr">"role"</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">"status"</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">"appUserEntity"</span>: &#123;</div><div class="line">                        <span class="attr">"phone"</span>: <span class="string">"15114052120"</span>,</div><div class="line">                        <span class="attr">"nickname"</span>: <span class="string">"xiaoming"</span>,</div><div class="line">                        <span class="attr">"status"</span>: <span class="number">1</span>,</div><div class="line">                        <span class="attr">"registerTime"</span>: <span class="number">155212121000</span>,</div><div class="line">                        <span class="attr">"lastLogin"</span>: <span class="number">155212121000</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="业主审核绑定"><a href="#业主审核绑定" class="headerlink" title="业主审核绑定"></a>业主审核绑定</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/property/submitBind/{operate}/{bindId}<br><em>请求方式</em>:GET<br><em>说明</em>:operate只能为agree或者refuse,bindId为上面审核绑定返回数据中的bindId字段</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="公告-08"><a href="#公告-08" class="headerlink" title="公告 (08)"></a>公告 (08)</h2><h3 id="获取一定数量的公告"><a href="#获取一定数量的公告" class="headerlink" title="获取一定数量的公告"></a>获取一定数量的公告</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/notice/getSome/{number}<br><em>请求方式</em>:GET<br><em>说明</em>:number为获取的公告的数量,最新公告优先返回.picturePathList以逗号分隔,没有图片则为null.注意content为null并不表示该公告详情为空,因为列表显示公告时不需要该字段,所以后台设为了null</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">6</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"周本顺杨栋梁严重违纪被双开"</span>,</div><div class="line">            <span class="attr">"description"</span>: <span class="string">"河北省委原书记、省人大常委会原主任周本顺严重违纪被开除党籍和公职"</span>,</div><div class="line">            <span class="attr">"content"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"createTime"</span>: <span class="number">1444977998184</span>,</div><div class="line">            <span class="attr">"picturePathList"</span>: <span class="string">"/oa/file/picture/20151023191327_823.jpg,/oa/file/picture/20151023191327_820.jpg"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"测试公告"</span>,</div><div class="line">            <span class="attr">"description"</span>: <span class="string">"描述"</span>,</div><div class="line">            <span class="attr">"content"</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">"createTime"</span>: <span class="number">1444899774481</span>,</div><div class="line">            <span class="attr">"picturePathList"</span>: <span class="string">"/oa/file/picture/20151023171656_889.jpg"</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="根据公告id获取公告详情"><a href="#根据公告id获取公告详情" class="headerlink" title="根据公告id获取公告详情"></a>根据公告id获取公告详情</h3><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/notice/getContent/{noticeID}<br><em>请求方式</em>:GET<br><em>说明</em>:返回内容为该公告的html代码,通过webview显示只会返回公告详情公告标题和发布时间需要客户端自行组装.</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">H5网页</div></pre></td></tr></table></figure></p>
<h2 id="版本检查-09"><a href="#版本检查-09" class="headerlink" title="版本检查 (09)"></a>版本检查 (09)</h2><p><strong>客户端请求</strong></p>
<blockquote>
<p><em>请求URL</em>:api/query/checkUpdate<br><em>请求方式</em>:GET</p>
</blockquote>
<p><strong>服务器返回数据</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"errorMsg"</span>: &#123;</div><div class="line">        <span class="attr">"code"</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="literal">null</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"jsonString"</span>: &#123;</div><div class="line">        <span class="attr">"path"</span>: <span class="string">"/oa/file/apk/test.apk"</span>,</div><div class="line">        <span class="attr">"versionCode"</span>: <span class="string">"v1.1.2"</span>,</div><div class="line">        <span class="attr">"description"</span>: <span class="string">"修复门禁bug"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">kangbiao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">39</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kangbiao</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.2.2</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
